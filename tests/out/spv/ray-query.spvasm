; SPIR-V
; Version: 1.4
; Generator: rspirv
; Bound: 97
OpCapability Shader
OpCapability RayQueryKHR
OpExtension "SPV_KHR_ray_query"
%1 = OpExtInstImport "GLSL.std.450"
OpMemoryModel Logical GLSL450
OpEntryPoint GLCompute %44 "main" %15 %17
OpExecutionMode %44 LocalSize 1 1 1
OpMemberDecorate %7 0 Offset 0
OpMemberDecorate %7 1 Offset 16
OpMemberDecorate %11 0 Offset 0
OpMemberDecorate %11 1 Offset 4
OpMemberDecorate %11 2 Offset 8
OpMemberDecorate %11 3 Offset 12
OpMemberDecorate %11 4 Offset 16
OpMemberDecorate %11 5 Offset 20
OpMemberDecorate %11 6 Offset 24
OpMemberDecorate %11 7 Offset 28
OpMemberDecorate %11 8 Offset 36
OpMemberDecorate %11 9 Offset 48
OpMemberDecorate %11 9 ColMajor
OpMemberDecorate %11 9 MatrixStride 16
OpMemberDecorate %11 10 Offset 112
OpMemberDecorate %11 10 ColMajor
OpMemberDecorate %11 10 MatrixStride 16
OpMemberDecorate %14 0 Offset 0
OpMemberDecorate %14 1 Offset 4
OpMemberDecorate %14 2 Offset 8
OpMemberDecorate %14 3 Offset 12
OpMemberDecorate %14 4 Offset 16
OpMemberDecorate %14 5 Offset 32
OpDecorate %15 DescriptorSet 0
OpDecorate %15 Binding 0
OpDecorate %17 DescriptorSet 0
OpDecorate %17 Binding 1
OpDecorate %18 Block
OpMemberDecorate %18 0 Offset 0
%2 = OpTypeVoid
%3 = OpTypeAccelerationStructureNV
%4 = OpTypeInt 32 0
%6 = OpTypeFloat 32
%5 = OpTypeVector %6 3
%7 = OpTypeStruct %4 %5
%8 = OpTypeVector %6 2
%9 = OpTypeBool
%10 = OpTypeMatrix %5 4
%11 = OpTypeStruct %4 %6 %4 %4 %4 %4 %4 %8 %9 %10 %10
%12 = OpTypeVector %6 4
%13 = OpTypeRayQueryKHR
%14 = OpTypeStruct %4 %4 %6 %6 %5 %5
%16 = OpTypePointer UniformConstant %3
%15 = OpVariable  %16  UniformConstant
%18 = OpTypeStruct %7
%19 = OpTypePointer StorageBuffer %18
%17 = OpVariable  %19  StorageBuffer
%24 = OpTypeFunction %5 %5 %11
%25 = OpConstant  %6  1.0
%26 = OpConstant  %6  2.4
%27 = OpConstant  %6  0.0
%42 = OpTypePointer Function %13
%45 = OpTypeFunction %2
%47 = OpTypePointer StorageBuffer %7
%48 = OpConstant  %4  0
%50 = OpConstant  %4  4
%51 = OpConstant  %4  255
%52 = OpConstant  %6  0.1
%53 = OpConstant  %6  100.0
%73 = OpConstant  %4  1
%86 = OpTypePointer StorageBuffer %4
%91 = OpTypePointer StorageBuffer %5
%23 = OpFunction  %5  None %24
%21 = OpFunctionParameter  %5
%22 = OpFunctionParameter  %11
%20 = OpLabel
OpBranch %28
%28 = OpLabel
%29 = OpCompositeExtract  %10  %22 10
%30 = OpCompositeConstruct  %12  %21 %25
%31 = OpMatrixTimesVector  %5  %29 %30
%32 = OpVectorShuffle  %8  %31 %31 0 1
%33 = OpExtInst  %8  %1 Normalize %32
%35 = OpCompositeConstruct  %33  %26 %26
%34 = OpVectorTimesScalar  %8  %33 %35
%36 = OpCompositeExtract  %10  %22 9
%37 = OpCompositeConstruct  %12  %34 %27 %25
%38 = OpMatrixTimesVector  %5  %36 %37
%39 = OpFSub  %5  %21 %38
%40 = OpExtInst  %5  %1 Normalize %39
OpReturnValue %40
OpFunctionEnd
%44 = OpFunction  %2  None %45
%43 = OpLabel
%41 = OpVariable  %42  Function
%46 = OpLoad  %3  %15
%49 = OpAccessChain  %47  %17 %48
OpBranch %54
%54 = OpLabel
%55 = OpCompositeConstruct  %5  %27 %25 %27
%56 = OpCompositeConstruct  %5  %27 %27 %27
%57 = OpCompositeConstruct  %14  %50 %51 %52 %53 %56 %55
%58 = OpCompositeExtract  %4  %57 0
%59 = OpCompositeExtract  %4  %57 1
%60 = OpCompositeExtract  %6  %57 2
%61 = OpCompositeExtract  %6  %57 3
%62 = OpCompositeExtract  %5  %57 4
%63 = OpCompositeExtract  %5  %57 5
OpRayQueryInitializeKHR %41 %46 %58 %59 %62 %60 %63 %61
OpBranch %64
%64 = OpLabel
OpLoopMerge %65 %67 None
OpBranch %66
%66 = OpLabel
%68 = OpRayQueryProceedKHR  %9  %41
OpSelectionMerge %69 None
OpBranchConditional %68 %69 %70
%70 = OpLabel
OpBranch %65
%69 = OpLabel
OpBranch %71
%71 = OpLabel
OpBranch %72
%72 = OpLabel
OpBranch %67
%67 = OpLabel
OpBranch %64
%65 = OpLabel
%74 = OpRayQueryGetIntersectionTypeKHR  %4  %41 %73
%75 = OpRayQueryGetIntersectionInstanceCustomIndexKHR  %4  %41 %73
%76 = OpRayQueryGetIntersectionInstanceIdKHR  %4  %41 %73
%77 = OpRayQueryGetIntersectionInstanceShaderBindingTableRecordOffsetKHR  %4  %41 %73
%78 = OpRayQueryGetIntersectionGeometryIndexKHR  %4  %41 %73
%79 = OpRayQueryGetIntersectionPrimitiveIndexKHR  %4  %41 %73
%80 = OpRayQueryGetIntersectionTKHR  %6  %41 %73
%81 = OpRayQueryGetIntersectionBarycentricsKHR  %8  %41 %73
%82 = OpRayQueryGetIntersectionFrontFaceKHR  %9  %41 %73
%83 = OpRayQueryGetIntersectionObjectToWorldKHR  %10  %41 %73
%84 = OpRayQueryGetIntersectionWorldToObjectKHR  %10  %41 %73
%85 = OpCompositeConstruct  %11  %74 %80 %75 %76 %77 %78 %79 %81 %82 %83 %84
%87 = OpCompositeExtract  %4  %85 0
%88 = OpIEqual  %9  %87 %48
%89 = OpSelect  %4  %88 %73 %48
%90 = OpAccessChain  %86  %49 %48
OpStore %90 %89
%92 = OpCompositeExtract  %6  %85 1
%94 = OpCompositeConstruct  %55  %92 %92 %92
%93 = OpVectorTimesScalar  %5  %55 %94
%95 = OpFunctionCall  %5  %23 %93 %85
%96 = OpAccessChain  %91  %49 %73
OpStore %96 %95
OpReturn
OpFunctionEnd